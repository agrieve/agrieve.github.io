<!DOCTYPE html>
<html>
<head>
  <title>Clank Dashboard</title>
<style>
  html, body {
    border: 0;
    margin: 0;
    font-family: sans-serif;
  }
  iframe {
    transform-origin: 0 0;
    transform: scale(1.5, 1.5);
    width:67%;
    height:600px;
    border:0;
    margin-top:-214px;
  }

  .iframe-holder {
    overflow: hidden;
    position: relative;
    height: 424px;
  }

</style>
</head>
<body tabindex=0>
<div class="iframe-holder">
<iframe scrolling=no src="https://chromeperf.appspot.com/report?sid=d6542096534166992e063320f8e1b7128e10ed53091e865eef3b5295644e60ce&num_points=800"></iframe>
</div>
<div style="margin:40px; font-size:60pt; text-align:center">
  <span id=branch_name>M##</span> branch in <span style="color: red" id=days_span></span>
</div>
<div class="iframe-holder">
<iframe scrolling=no src="https://chromeperf.appspot.com/report?sid=e0a3413f2dc96f8600f045642abbbab6691b110b976ba2136bf38eaed02c8aa0&num_points=800"></iframe>
</div>
</body>
<script>
var MILESTONE_START = 63;
var BRANCH_DATES = [
  'Oct 12, 2017',
  'Nov 30, 2017',
  'Jan 18, 2018',
  'Mar 1, 2018',
  'Apr 12, 2018',
  'May 24, 2018',
  'Jul 19, 2018',
  'Aug 30, 2018',
  'Oct 11, 2018',
  'Nov 29, 2018',
  'Jan 24, 2019',
  'Mar 7, 2019',
  'Jul 19, 2022',  // NEED TO UPDATE :)
  ];
var MINUTES = 1000 * 60;
(function() {
  for (var i = 0; i < BRANCH_DATES.length; ++i) {
    var now = new Date;
    var then = new Date(BRANCH_DATES[i]);
    var days = Math.floor((then - now) / (60 * MINUTES * 24));
    if (days >= 0) {
      branch_name.textContent = 'M' + (MILESTONE_START + i);
      days_span.textContent = days + ' days';
      break;
    }
  }
})();
function checkFocus() {
  if (!document.activeElement) return;
  if (document.activeElement.tagName == 'IFRAME') {
    console.log('iframe has focus');
    document.body.focus()
  }
}
function refreshIframes() {
  var frames = document.getElementsByTagName('iframe');
  for (var i = 0; i < frames.length; ++i) {
    frames[i].src = frames[i].src;
  }
}
function reloadPage() {
  location.href = location.href;
}
setInterval(checkFocus, 1000);
setInterval(refreshIframes, 10 * MINUTES);
setInterval(reloadPage, 60 * MINUTES * 24);
</script>
</html>
